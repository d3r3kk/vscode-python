# Python package
# Create and test a Python package on multiple Python versions.
# Add steps that analyze code, save the dist with the build record, publish to a PyPI-compatible index, and more:
# https://docs.microsoft.com/azure/devops/pipelines/languages/python

trigger:
- master

variables:
  LNX_POOL_NAME: 'Hosted Ubuntu 1604'
  WIN_POOL_NAME: 'Hosted VS2017'
  
jobs:

- job: 'LinuxStuff'
  variables:
    ContinueOn: $[eq('Linux', variables['AGENT_OS'])]
  
  pool:
    name: $(LNX_POOL_NAME)
  continueOnError: $(ContinueOn)

  steps:
  - bash: |
      echo Agent is: $AGENT_OS
      echo Continue on error is: $ContinueOn
      raise error "Test cases failed !!!"
    displayName: 'pytest'

- job: 'WindowsStuff'
  variables:
    ContinueOn: $(ContinueOn)
  pool:
    name: $(WIN_POOL_NAME)
  continueOnError: $(ContinueOn)

  steps:
  - bash: |
      echo Agent is: $AGENT_OS
      echo Continue on error is: $ContinueOn
      raise error "Test cases failed !!!"
    displayName: 'pytest'
